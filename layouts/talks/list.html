{{ define "main" }}
{{ $lang := .Site.Language.Lang }}
<article class="px-1">
    <h1 class="dynamic-title">Talks</h1>

    <div class="content">
        <div id="archives" class="pl-xl-3">
            {{ $pages := where .Site.RegularPages "Type" "talks" }}
            {{ $last_year := "" }}
            {{ $pages_count := len $pages }}

            {{ range $index, $page := $pages }}
            {{ $cur_year := .Date.Format "2006" }}

            {{ if ne $cur_year $last_year }}
            {{ if ne $last_year "" }}</ul>{{ end }}

            <time class="year lead d-block">{{ $cur_year }}</time>
            <ul class="list-unstyled">

                {{ $last_year = $cur_year }}
                {{ end }}

                <li>
                    {{ $ts := .Date.Format "2006-01-02" }}
                    <span class="date day" data-ts="{{ .Date.Unix }}" data-df="DD"> {{ .Date.Format "02" }}</span>
                    <span class="date month small text-muted ms-1" data-ts="{{ .Date.Unix }}">
                        {{ .Date.Format "Jan" }}
                    </span>
                    <a href="{{ .RelPermalink }}">
                        {{ if .Params.icon }}
                        <i class="fa fa-{{ .Params.icon }} fa-fw me-1" aria-hidden="true"></i>
                        {{ end }}
                        {{ .Title }}
                    </a>
                    <!-- Event metadata-->
                    {{ $event := .Params.event }}
                    {{ if $event }}
                    <span class="small text-muted">
                        {{ if $event }} â€¢ <i class="fas fa-calendar-alt me-1"></i>{{ $event }}{{ end }}
                    </span>
                    {{ end }}
                </li>

                {{ if eq (add $index 1) $pages_count }}
            </ul>{{ end }}
            {{ end }}
        </div>
    </div>
</article>
{{ end }}